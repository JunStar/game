<!DOCTYPE html>
<html>
    <head>
      <link href="http://wei.qq275.com/vapp/shangjieba.png" rel="shortcut icon" type="image/vnd.microsoft.icon">
      <title>测一测你在哪方面高人一等？</title>
      <meta charset="utf-8">

        <script src="http://wx.51self.com/js/jquery.min.js"></script>

      <script>  
        function click_ad(idx){
          ajax = new XMLHttpRequest();
          ajax.open('GET', "/weitest/click_stat?id=" + idx, true);
          ajax.send(null);
          return false;
        }
      </script>

      <meta name="viewport" content="target-densitydpi=320,width=640,user-scalable=no">
<link rel="stylesheet" type="text/css" href="http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/reset.css" />
<link rel="stylesheet" type="text/css" href="http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/common.css" />
<script type="text/javascript" src="http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/jquery.cookie.js"></script>
<script type="text/javascript" src="http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/jqueryui.js"></script>
<link rel="stylesheet" type="text/css" href="http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/jqueryui.css" />

      <script type="text/javascript">
        $(function(){
        $("body").on("click", "#close", function(){
            $("#result").hide();
            $("#ad").show();
            $("#content").show();
        });
        $("#share").click(function(){
            var info = $("#info").html();
        });
    });
      </script>
        <script type="text/javascript">
                var r = -1;  
      var share_callback_hy = function () {
            ajax = new XMLHttpRequest();
            ajax.open('GET', '/weitest/wx_share?f=hy_624274854&r=' + r, true);
            ajax.send(null);
        }

        var share_callback_pyq = function () {
            ajax = new XMLHttpRequest();
            ajax.open('GET', '/weitest/wx_share?f=pyq_624274854&r=' + r, true);
            ajax.send(null);
        }

        var dataForWeixin = {
              appId: "wx3beaf4b046a7ff7e",
              TLImg: "http://1251008728.cdn.myqcloud.com/1251008728/xxiang/xx17.jpg",
              
                   url: "http://newplhumfsib.86730660.com" + "/v150411/weitest/758114044"  ,  
              
              title: "测测你在什么方面高人一等？ ", 
              desc: "快来测一下吧！"
        };
   
(function(){
	var onBridgeReady = function () {	
		WeixinJSBridge.on('menu:share:appmessage', function(argv){
                        var info = $("#info").text();          
                        info = info.replace("你", "我"); 
			WeixinJSBridge.invoke('sendAppMessage',{
				'img_url' : dataForWeixin.TLImg ,
				'img_width' : '120',
				'img_height' : '120',
				'link' : dataForWeixin.url,
				'desc' : dataForWeixin.desc,
				'title' : info + '  ' + dataForWeixin.title
			}, function(res) {
				switch(res.err_msg) {
					case "send_app_msg:confirm":
					case "send_app_msg:ok":
						location.href = "http://51self.com/weitest/1203611402"; 
						break;
				}
			});
			share_callback_hy ();
		});
		WeixinJSBridge.on('menu:share:timeline', function(argv){
                        var info = $("#info").text();          
                        info = info.replace("你", "我"); 
			WeixinJSBridge.invoke('shareTimeline',{
				'img_url' : dataForWeixin.TLImg ,
				'img_width' : '120',
				'img_height' : '120',
				'link' : dataForWeixin.url,
				'desc' : dataForWeixin.desc,
				'title' : info + '  ' + dataForWeixin.title
			}, function(res) {
				switch(res.err_msg) {
					case "share_timeline:confirm":
					case "share_timeline:ok":
						location.href = "http://51self.com/weitest/1203611402"; 
						break;
				}
			});
			share_callback_pyq();
		});
	};
	
	if(document.addEventListener){
		document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
	} else if(document.attachEvent){
		document.attachEvent('WeixinJSBridgeReady' , onBridgeReady);
		document.attachEvent('onWeixinJSBridgeReady' , onBridgeReady);
	}
	
})();	


        </script>
      <style type="text/css">
        #header {
        width:600px;
        margin:0 auto;
        height:600px;
    }
    #turnplatewrapper {
        height:592px;
        width:592px;
        background:url('http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/plate_06.png') top left no-repeat;
        -moz-user-select:none;
        user-select:none;
    }

    #newLoop {
        height:592px;
        width:592px;
        background:url('http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/plate_05.png') top left no-repeat;
    }

    #newLoop #awards {
        position:absolute;
        width:100%;
        height:100%;
        background:url('http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/plate_03.png') top left no-repeat;
    }

    #platebtn {
        position:absolute;
        top:218px;
        left:218px;
        background:url('http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/plate_04.png') top left no-repeat;
        height:155px;
        width:155px;
        cursor:pointer;
    }

    #platebtn.hover {
        background-position:0 -155px
    }

    #newLoop #platebtn.click {
        background-position:0 -310px
    }

    #gift {
        width:398px;
        height:89px;
        position:absolute;
        left:90px;
        top:720px;
    }

    #msg {
        position:absolute;
        display:none;
        top:130px;
        left:195px;
        border-radius:5px;
        color:#333;
        border:3px solid #FED33f;
        box-shadow:2px 2px 2px rgba(0,0,0,0.6);
        background:#fffcf2;
        width:200px;
        padding:10px;
        text-align:center;
    }

    #content {
        width:960px;
        margin:0 auto;
    }

    #init {
        position:absolute;
        top:50%;
        left:50%;
        width:100px;
        height:30px;
        border-radius:5px;
        color:#333;
        border:3px solid #FED33f;
        box-shadow:2px 2px 2px rgba(0,0,0,0.6);
        background:#fffcf2;
        width:250px;
        padding:10px;
        margin-top:-30px;
        margin-left:-138px;
        text-align:center;
        opacity:0.9;
        filter:alpha(opacity=90);
    }


    #top-menu-wrapper {
        height:51px;
        margin-bottom:-51px;
    }

    #top-menu {
        width:960px;
        margin:0 auto;
    }

    #top-menu a, #top-menu span {
        line-height:50px;
        display:inline-block;
        font-size:16px;
        color:#fff;
        text-decoration:1px 1px 2px rgba(0, 0, 0, 0.3);
    }

    #top-menu .user {
        padding-left:30px;
        display:inline-block;
        height:50px;
        color:#fff;
    }
    /*jquery ui 定制 */
    body .ui-dialog {
        padding:0px;
        background:#ebeae3;
        box-shadow:2px 2px 5px rgba(0,0,0,0.5);
    }

    body .ui-dialog .ui-dialog-titlebar {
        height:23px;
        padding:0;
        margin:0;
        background:none;
        border:0 none transparent;
    }

    body .ui-dialog .ui-dialog-titlebar .ui-dialog-title {
        display:none;
    }

    body .ui-widget-content {
        border:4px solid #F7D102;
    }

    body .ui-dialog .ui-dialog-titlebar-close {
        background:#f6d20d;
        right:0;
        margin-top:-12px;
    }

    body .ui-dialog .ui-dialog-buttonpane {
        border:0 none transparent;
    }

    body .ui-dialog .ui-button-text {
        padding:0.8em 1em;
    }

    body .ui-widget-overlay {
        background:url('http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/bg_04.png');
        _filter:alpha(opacity=60);
    }

    .mv5 {
        margin-left:5px;
        margin-right:5px;
    }
    #bg{
        margin: 0 auto 0;
        width: 100%;
        height: auto;
        background:#fff;
    }
    #begin {
        cursor: pointer;
        float: left;
        height: 60px;
        margin: 53px 35px 0 0;
        width: 168px;
    }
    #marry-who{
        margin: 0 auto;
        padding-top: 10px;
        width: 100%;
        height: 172px;
        background-image: url(http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/1.jpg);
        background-repeat: no-repeat;
        background-position: bottom;
        -moz-background-size:100% 100%;
        background-size:100% 100%;
    }
    #marry-form{
        padding: 17px 20px 0;
        float:left;
        display:inline;
    }
    #ad{
        margin:0 auto;
        text-align:center;
        width:650px;
    }
    #bai{
        margin:0 auto;
        text-align:center;
        width:650px;
        overflow:hidden;
    }
    #marry-form .form-one{
        font-size:30px;
        margin: 60px 35px 0 0;
        float:left;
    }
    #result{
        font-size:30px;
        width: 90%;
        height: 158px;
        margin: 0 auto;
        position: fixed;
        top:40%;
        background-image: url(http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/result.png);
        background-repeat: no-repeat;
        filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod='scale')";
        -moz-background-size:100% 100%;
        background-size:100% 100%;
        display: none;
        z-index: 999;
    }
    #close{
        position: absolute;
        width: 46px;
        height: 46px;
        right: 0;
        margin-top: -5px;
        margin-right: -5px;
    }
    #info{
        padding-top: 40px;
        font-weight:800;
        padding-bottom: 8px;
        padding-left: 30px;
        font-size:18px;
        width:95%;
        z-index: 999;
    }
    #tools{
        padding-left: 30px;
    }
    #share{
        font-size:18px;
        margin-top:2px;
        color:red;
    }
      </style>
    </head>
    

      <div class="flexslider"   style="margin:0px auto; align:center;" >
      <a href="http://51self.com/weitest/1203611402" >
          <img style="width:100%; max-height:60px;" src="http://kaokao.qiniudn.com/head1.png" /> </a>
  <div class="holder" style="clear:both;"></div>
</div>


    <body>
<div id="ceshuResult"></div>
<div id="result" style="left: 43px; display: none;">
    <div id="close">
        <img src="http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/close.png" alt=""/>
    </div>
    <div id="info">
    </div>
    <div id="tools">
    <span id="share">
      觉得好玩就分享到朋友圈让朋友一起玩吧！
    </span>
    </div>
</div>
<div id="header">
    <div style="width: 600px;position: relative;">
        <div id="turnplatewrapper" onselectstart="return false;" class="bgfix">
            <div id="newLoop" class="bgfix">
                <div id="awards" class="bgfix">
                </div>
                <div id="platebtn" class="bgfix">
                </div>
                <p id="msg">
                </p>
            </div>
        </div>
    </div>

</div>
<div id="bg">
    <div id="marry-who">
        <div id="marry-form">
            <div class="form-one">
                &nbsp;&nbsp;
                <label for="name">填写你的姓名</label>
                <input type="text" name="name" id="userName" style="width:120px;font-size:30px;"/>
            </div>
            <div id="begin">
                <img src="http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/start.png" alt=""/>
            </div>
        </div>
    </div>
</div>

<div id="content">
</div>
<script>
var newLoop = {
    turnplateBox : $('#newLoop'),
    turnplateBtn : $('#begin'),
    lightDom : $('#turnplatewrapper'),
    msgBox : $('#msg'),
    height : '592', //帧高度
    lightSwitch : 0, //闪灯切换开关. 0 和 1间切换
    minResistance : 5, //基本阻力
    Cx : 0.01, //阻力系数 阻力公式：  totalResistance = minResistance + curSpeed * Cx;
    accSpeed : 15, //加速度
    accFrameLen : 40, //加速度持续帧数
    maxSpeed : 250, //最大速度
    minSpeed : 20, //最小速度
    frameLen : 10, //帧总数
    totalFrame : 0, //累计帧数,每切换一帧次数加1
    curFrame : 0, //当前帧
    curSpeed : 20, //上帧的速度
    lotteryTime : 0, //抽奖次数
    lotteryIndex : 5, //奖品index
    errorIndex : 5, //异常时的奖品指针
    initBoxEle : $('#newLoop #init'),
    progressEle : $('#newLoop #init span'),
    initProgressContent : '~~~^_^~~~', //初始化进度条的内容
    initFreshInterval : 500, //进度条刷新间隔
    virtualDistance : 10000, //虚拟路程,固定值，速度越快，切换到下帧的时间越快: 切换到下帧的时间 = virtualDistance/curSpeed
    isStop : false, //抽奖锁,为true时，才允许下一轮抽奖
    timer2 : undefined, //计时器
    initTime : undefined,
    showMsgTime : 2000, //消息显示时间
    lotteryChannel: '',

    //初始化
    init : function() {
        this.initAnimate()
        this.freshLottery();
        this.turnplateBtn.click($.proxy(function(){
            this.click();
        },this));
    },

    //初始化动画
    initAnimate : function() {
        this.initBoxEle.show();
        clearTimeout(this.initTimer);
        var curLength = this.progressEle.text().length,
                totalLength = this.initProgressContent.length;

        if (curLength < totalLength) {
            this.progressEle.text(this.initProgressContent.slice(0, curLength + 1));
        }else{
            this.progressEle.text('');
        }
        this.initTimer = setTimeout($.proxy(this.initAnimate, this), this.initFreshInterval);
    },

    //停止初始化动画
    stopInitAnimate : function() {
        clearTimeout(this.initTimer);
        this.initBoxEle.hide();
    },

    //更新抽奖次数
    freshLottery : function() {
        this.stopInitAnimate();
        //this.setBtnHover();
        this.isStop = true;
    },

    //设置按钮三态
    setBtnHover : function() {
        //按钮三态
        $('#platebtn').hover(function(){
            $(this).addClass('hover');
        },function() {
            $(this).removeClass('hover click');
        }).mousedown(function(){
                    $(this).addClass('click');
                }).mouseup(function(){
                    $(this).removeClass('click');
                });
    },

    //获取奖品
    lottery : function(name) {
        num = Number(name.charCodeAt());
        var res = num%10;
        if(res>=9){
            res = 8;
        }else{
            res = Number(res);
            if(res==4 || res==6){
                res = Number(res)+1;
            }
        }
        newLoop.lotteryIndex = res;
        this.totalFrame = 0;
        this.curSpeed = this.minSpeed;
        this.turnAround();
    },

    //点击抽奖
    click : function() {
        //加锁时
        if(this.isStop == false) {
            return false;
        }
        //输入名字
        var name = $("#userName").val();
        if(name == "" || name.length == 0){
            alert("请输入你的姓名!");
            return false;
        }
        this.lottery(name);
    },

    //更新当前速度
    freshSpeed : function() {
        var totalResistance = this.minResistance + this.curSpeed * this.Cx;
        var accSpeed = this.accSpeed;
        var curSpeed = this.curSpeed;
        if(this.totalFrame >= this.accFrameLen) {
            accSpeed = 0;
        }
        curSpeed = curSpeed - totalResistance + accSpeed;

        if(curSpeed < this.minSpeed){
            curSpeed = this.minSpeed;
        }else if(curSpeed > this.maxSpeed){
            curSpeed = this.maxSpeed;
        }

        this.curSpeed  = curSpeed;
    },
    //闪灯,切换到下一张时调用
    switchLight : function() {
        this.lightSwitch = this.lightSwitch === 0 ? 1 : 0;
        var lightHeight = -this.lightSwitch * this.height;
        this.lightDom.css('backgroundPosition','0 ' + lightHeight.toString() + 'px');
    },
    //旋转,trunAround,changeNext循环调用
    turnAround : function(info, infos) {
        //加锁
        this.isStop = false;
        var intervalTime = parseInt(this.virtualDistance/this.curSpeed);
        this.timer = window.setTimeout('newLoop.changeNext()', intervalTime);
    },
    //弹出奖品
    showAwards : function(){
        var info = "";
        var infos = "";
        var note = "";
        var res = newLoop.lotteryIndex;
        var name = $("#userName").val();
        if(res == 0){
            info = "工作";
            note = "所有的工作都可以轻松解决。";
        }else if(res == 1){
            info = "智商";
            note = "智商已超越爱因斯坦好几倍。";
        }else if(res == 2){
            info = "身高";
            note = "已成为世界第一巨人。";
        }else if(res == 3){
            info = "眼界";
            note = "慧眼识人，没有什么可以瞒过你。";
        }else if(res == 5){
            info = "情商";
            note = "唐伯虎也甘拜下风。";
        }else if(res == 7){
            info = "物质";
            note = "已经找不到还缺些什么了。";
        }else if(res == 8){
            info = "长相";
            note = "人见人爱，花见花开。";
        }else{
            info = "长相";
            note = "人见人爱，花见花开。";
        }
        $.cookie("S55220067", "r"+res, {expires: 3});
        info = "'"+name+"'在"+info+"方面高人一等。"+note;
        infos = info;
        info = info+ "好牛<img src='http://1251008728.cdn.myqcloud.com/1251008728/2014/0524/1.gif' _moz_resizing='true'>";
        $("#info").html(info);
        $("#infos").text(infos);
        $("#wanhuir_page_result").val(infos);
        document.title = infos;

        $("#result").show();
    },
    //切换到下帧
    changeNext : function() {
        //判断是否应该停止
        if(this.lotteryIndex !== undefined && this.curFrame == this.lotteryIndex && this.curSpeed <= this.minSpeed+10 && this.totalFrame > this.accFrameLen) {
            this.isStop = true;
            this.showAwards();
            return;
        }

        var nextFrame =  this.curFrame+1 < this.frameLen ? this.curFrame+1 : 0;
        var bgTop = - nextFrame * this.height;
        this.turnplateBox.css('backgroundPosition','0 ' + bgTop.toString() + 'px');
        this.switchLight();
        this.curFrame = nextFrame;
        this.totalFrame ++;
        this.freshSpeed();
        this.turnAround();
    }
}
</script>
<div id="infos" style="display:none"></div>

<script>
    newLoop.init();
</script>

</body>
   
    <br/>

      
      <div class="flexslider"   style="margin:0px auto; align:center;" >
      <a href="http://51self.com/weitest/1203611402" >
          <img style="width:100%; max-height:60px;" src="http://kaokao.qiniudn.com/head1.png" /> </a>
  <div class="holder" style="clear:both;"></div>
</div>

        <div class="rec_games" style="margin:0px auto;text-align:center; width:97%;white-space:nowrap; line-height:42px; min-height:230px; border-bottom:none; ">
  <div class="rec_holder" style="clear:both;">
    
      <div class="game" style="display:inlineblock; margin:10px 0px; padding-left:20px; background:#fff; width:100%; font-size:30px; overflow:hidden;  border-bottom:1px solid #555; text-align:left;">
        <a href="http://www.021591.com/weitest/1275831380" style="text-decoration:none; ">
          【新】最让你念念不忘的那个人是谁？
        </a>
      </div>
      <div class="game" style="display:inlineblock; margin:10px 0px; padding-left:20px; background:#fff; width:100%; font-size:30px; overflow:hidden;  border-bottom:1px solid #555; text-align:left;">
        <a href="http://www.021591.com/weitest/819901617" style="text-decoration:none; ">
          测测会有多少人向你表白？
        </a>
      </div>
      <div class="game" style="display:inlineblock; margin:10px 0px; padding-left:20px; background:#fff; width:100%; font-size:30px; overflow:hidden;  border-bottom:1px solid #555; text-align:left;">
        <a href="http://www.51self.com/weitest/89682669" style="text-decoration:none; ">
          基因测试：你长了一张什么脸?
        </a>
      </div>
      <div class="game" style="display:inlineblock; margin:10px 0px; padding-left:20px; background:#fff; width:100%; font-size:30px; overflow:hidden;  border-bottom:1px solid #555; text-align:left;">
        <a href="http://www.021591.com/weitest/848993620" style="text-decoration:none; ">
          你将来可以晒什么？
        </a>
      </div>

    <div class="game" style="display:inlineblock; margin:10px 0px; padding-left:20px; background:#fff; width:100%; font-size:30px; overflow:hidden;  border-bottom:1px solid #555; text-align:left;">
        <a href="http://021591.com?f=r" style="text-decoration:none; ">
         更多好玩免费游戏！
        </a>
    </div>

  </div>
</div>

        <div class="flexslider"   style="margin:0px auto; align:center;" >
      <a href="http://51self.com/weitest/1203611402" >
          <img style="width:100%; max-height:60px;" src="http://kaokao.qiniudn.com/head1.png" /> </a>
  <div class="holder" style="clear:both;"></div>
</div>

        <div class="rec_games" style="margin:0px auto;text-align:center; width:97%;white-space:nowrap; line-height:42px; min-height:230px; border-bottom:none; ">
  <div class="rec_holder" style="clear:both;">
    
      <div class="game" style="display:inlineblock; margin:10px 0px; padding-left:20px; background:#fff; width:100%; font-size:30px; overflow:hidden;  border-bottom:1px solid #555; text-align:left;">
        <a href="/weitest/906806539?f=r" style="text-decoration:none; ">
          【游戏】看谁不爽，就抽丫的！
        </a>
      </div>
      <div class="game" style="display:inlineblock; margin:10px 0px; padding-left:20px; background:#fff; width:100%; font-size:30px; overflow:hidden;  border-bottom:1px solid #555; text-align:left;">
        <a href="/weitest/885361695?f=r" style="text-decoration:none; ">
          测测你在古代的名字，身份和样子
        </a>
      </div>
      <div class="game" style="display:inlineblock; margin:10px 0px; padding-left:20px; background:#fff; width:100%; font-size:30px; overflow:hidden;  border-bottom:1px solid #555; text-align:left;">
        <a href="/weitest/92425054?f=r" style="text-decoration:none; ">
          基因测试：你脑袋里装了啥！神准！
        </a>
      </div>
      <div class="game" style="display:inlineblock; margin:10px 0px; padding-left:20px; background:#fff; width:100%; font-size:30px; overflow:hidden;  border-bottom:1px solid #555; text-align:left;">
        <a href="/weitest/882894726?f=r" style="text-decoration:none; ">
          拇指测试：你适合开什么车？
        </a>
      </div>

    <div class="game" style="display:inlineblock; margin:10px 0px; padding-left:20px; background:#fff; width:100%; font-size:30px; overflow:hidden;  border-bottom:1px solid #555; text-align:left;">
        <a href="http://mp.weixin.qq.com/s?__biz=MjM5NjIzOTE2OQ==&mid=200366500&idx=1&sn=21c2832b5382e6aafd4e55a0d6c85f5f#wechat_redirect" style="text-decoration:none; ">
         更多免费【微信游戏】！
        </a>
    </div>

  </div>
</div>

 
    <div style="display: none;">                                                   
  <script src="http://v1.cnzz.com/z_stat.php?id=1000438304&web_id=1000438304" language="JavaScript"></script>
</div>   

   
      <script>
  var url="/weitest/stat?type=pv&cid=224&gid=625&uid="
  var img = new Image();
  img.src = url;
</script>

</html>
